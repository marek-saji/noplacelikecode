$break-point-dates-on-side:   "all and (min-width: 20em)";
$break-point-dates-full-size: "all and (min-width: 25em)";

$date-width: 5em;
$small-date-font-size: 0.8em;


html
{
  height: 100%;
  background-color: white;
  font: $font-main;
  color: $text-colour;
  line-height: $line-height;
  text-rendering: optimizeLegibility;
  -webkit-font-feature-settings: "onum";
  font-feature-settings: "onum";
  font-variant-numeric: oldstyle-nums;
  margin: 0;
  padding: 0;

  @media all and (min-width: $width-tiny)  { font-size: 1.25em; }
  @media all and (min-width: $width-small) { font-size: 1.5em;  }
}
body
{
  min-height: 100%;
  margin: 0;
  padding: 0 1em;
}

/**
 * Use background image gradiet for drawing underlines.
 * This way we can set position and colour
 * https://medium.com/p/7c03a9274f9
 */
/*body*/.background-image a
{
  text-decoration: none;
  background-image: linear-gradient(to bottom, rgba(0,0,0,0) 50%, #666 50%);
  background-repeat: repeat-x;
  background-size: 2px 2px;
  /** if >1em will not be visible */
  background-position: 0 0.975em;
  text-shadow: -3px 0 white,
               -2px 0 white,
               -1px 0 white,
               1px 0 white,
               2px 0 white,
               3px 0 white;
  &:link
  {
    color: $link-colour;
    background-image: linear-gradient(to bottom, rgba(0,0,0,0) 50%, $link-underline-colour 50%);
  }
  &:visited
  {
    color: $link-visited-colour;
    /* Unfortunatelly, browsers are unwilling to set :visited styles
     * other than color to avoid stealing visited URLs by malicious
     * scripts */
    background-image: linear-gradient(to bottom, rgba(0,0,0,0) 50%, $link-visited-underline-colour 50%);
  }
  &:active,
  &:focus
  {
    color: $link-active-colour;
    background-image: linear-gradient(to bottom, rgba(0,0,0,0) 50%, $link-active-underline-colour 50%);
  }
}

.header
{
  text-align: center;
}
  .header__title
  {
    font-size: 1em;
    line-height: 1em;
    font-weight: normal;

    @media all and (min-width: $width-small)   { font-size: 1.5em; }
    @media all and (min-width: $width-medium)  { font-size: 2.5em; }
    @media all and (min-width: $width-big)     { font-size: 3.5em; }
    @media all and (min-width: $width-bigger)  { font-size: 4.5em; }
    @media all and (min-width: $width-big-ass) { font-size: 5.5em; }
  }
    .header__title a
    {
      /** Overwrite `.backgroundimage a` styles */
      &,
      .background-image &
      {
        text-decoration: none;
        background-image: none;
        color: $brand-colour;
      }

      /** underline text (not the comments brackets) on hover */
      .background-image &
      {
        span
        {
          background-size: 0.03em 0.03em;
          background-repeat: repeat-x;
          /** if >1em will not be visible */
          background-position: 0 0.975em;
        }

        &:hover span,
        &:focus span
        {
          background-image: linear-gradient(to bottom, rgba(0,0,0,0) 50%, $brand-colour 50%);
        }
      }
    }
      .header__title b
      {
        font: $font-code;
      }
  .header__title
  {
    margin: 0;
    padding: 0;
  }

.post__header
{
  text-align: center;
  margin-top: 1em;

  h2,
  p
  {
    margin:  0;
    padding: 0;
    line-height: 1em;
  }

  .post__meta
  {
    margin-top: 0.25em;
  }
}
.post__title
{
  font-size: 2em;

  @media all and (min-width: $width-small)   { font-size: 2.5em; }
  @media all and (min-width: $width-medium)  { font-size: 3.5em; }
  @media all and (min-width: $width-big)     { font-size: 4.5em; }
  @media all and (min-width: $width-bigger)  { font-size: 5.5em; }
  @media all and (min-width: $width-big-ass) { font-size: 6.5em; }
}
.posts__list
{
  list-style: none;
  padding: 0;

  & > li
  {
    margin-bottom: 0.5em;

    & > time
    {
        display: block;
        line-height: 1em;
        font-size: $small-date-font-size;
    }

    & > .post__tags
    {
      font-size: 0.8em;
    }

    @media #{ $break-point-dates-on-side }
    {
        padding-left: $date-width * $small-date-font-size / 1em;

        &::after
        {
            clear: both;
            content: '';
            display: table;
            width: 100%;
        }

        & > time
        {
          display: inline-block;
          float: left;
          width: $date-width;
          margin-left: - $date-width;
          line-height: inherit;
          position: static;
        }
    }

    @media #{ $break-point-dates-full-size }
    {
        padding-left: $date-width;

        & > time
        {
          font-size: 1em;
        }
    }

  }
}
.post__meta time,
.posts__list time
{
  color: $secondary-text-colour;
}
.post__tags,
.post__tags p,
.post__tags ul,
.post__tags li
{
  display: inline;
  list-style: none;
  margin: 0;
  padding: 0;
}
  .post__tags p
  {
    @include sr-only();
  }

.post__content::after
{
  $size: 2em;

  content: '❧';
  display: block;
  text-align: center;
  color: $secondary-text-colour;
  font-family: serif;
  font-size: $size;
  margin: $size * 2/3 0;
}

.hashtag::before
{
  content: '#';
  opacity: 0.7;
}

.post__content,
.post__pagination,
.post__related,
.archive,
.footer
{
  max-width: $content-width;
  margin: 0 auto;
}

.content
{
  margin-bottom: $line-height;
}


.footer
{
  margin-top: 2 * $line-height;

  -webkit-column-width: 14em;
  -webkit-column-gap:   2em;
  column-width: 14em;
  column-gap:   2em;

  p
  {
    margin-top: 0;
  }

  ul
  {
    margin: 0;
    padding: 0;
    list-style: none;
  }
}

i.u-nickname
{
  font-style: normal;

  &::before
  {
    content: '‘';
  }
  &::after
  {
    content: '’';
    /* kerning for i + ’ */
    padding-left: 1px;
  }
}
